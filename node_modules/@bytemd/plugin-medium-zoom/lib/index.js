export default function mediumZoom(options) {
    let m;
    return {
        viewerEffect({ markdownBody }) {
            const imgs = [...markdownBody.querySelectorAll('img')].filter((e) => {
                var _a, _b;
                return ((_b = (_a = options === null || options === void 0 ? void 0 : options.filter) === null || _a === void 0 ? void 0 : _a.call(options, e)) !== null && _b !== void 0 ? _b : true) && !e.closest('a');
            });
            if (imgs.length === 0)
                return;
            (async () => {
                if (!m) {
                    m = await import('medium-zoom');
                }
                m.default(imgs, options);
            })();
        },
    };
}
